"use strict";(self.webpackChunkstock_analysis=self.webpackChunkstock_analysis||[]).push([[276],{5276:(F,y,o)=>{o.r(y),o.d(y,{StrategyEditorModule:()=>M});var s=o(3075),c=o(1083),f=o(3430),m=o(9808),l=o(8966),h=o(1042),t=o(5e3),u=o(7322),v=o(7531),p=o(7423);let A=(()=>{class n{constructor(a,e,r){this.fb=a,this.dialogRef=e,this.data=r}ngOnInit(){this.analysisForm=this.fb.group({name:["",[s.kI.required]],weight:[1,[s.kI.required,s.kI.min(0)]]})}onSave(){const a=this.data.strategyId,e={id:(0,h.Z)(),name:this.analysisForm.get("name").value,weight:this.analysisForm.get("weight").value,strategyId:a,dateAdded:new Date,color:null,copiedFrom:null,parameters:[]};this.dialogRef.close(e)}}return n.\u0275fac=function(a){return new(a||n)(t.Y36(s.qu),t.Y36(l.so),t.Y36(l.WI))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-analysis-dialog"]],decls:15,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"analysis-form",3,"formGroup"],["appearance","fill"],["matInput","","formControlName","name"],["matInput","","formControlName","weight","type","number"],["mat-dialog-actions",""],["mat-button","","color","primary",3,"disabled","click"]],template:function(a,e){1&a&&(t.TgZ(0,"h1",0),t._uU(1,"Add Analysis"),t.qZA(),t.TgZ(2,"div",1)(3,"form",2)(4,"mat-form-field",3)(5,"mat-label"),t._uU(6,"Analysis Name"),t.qZA(),t._UZ(7,"input",4),t.qZA(),t.TgZ(8,"mat-form-field",3)(9,"mat-label"),t._uU(10,"Analysis Weight"),t.qZA(),t._UZ(11,"input",5),t.qZA()()(),t.TgZ(12,"div",6)(13,"button",7),t.NdJ("click",function(){return e.onSave()}),t._uU(14,"Save"),t.qZA()()),2&a&&(t.xp6(3),t.Q6J("formGroup",e.analysisForm),t.xp6(10),t.Q6J("disabled",e.analysisForm.invalid))},directives:[l.uh,l.xY,s._Y,s.JL,s.sg,u.KE,u.hX,v.Nt,s.Fj,s.JJ,s.u,s.wV,l.H8,p.lW],styles:[".analysis-form[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]}),n})();var C=o(7826),x=o(7264),Z=o(4087),g=o(9224),S=o(8099);function T(n,i){if(1&n){const a=t.EpF();t.TgZ(0,"mat-card",7)(1,"mat-card-title"),t._uU(2),t.qZA(),t.TgZ(3,"mat-card-subtitle"),t._uU(4),t.qZA(),t.TgZ(5,"div",8)(6,"button",9),t.NdJ("click",function(r){const b=t.CHM(a).$implicit;return t.oxw(2).onDeleteAnalysis(b,r)}),t.TgZ(7,"mat-icon"),t._uU(8,"delete"),t.qZA()()()()}if(2&n){const a=i.$implicit,e=t.oxw(2);t.Q6J("routerLink",e.createAnalysisEditorLink(a.id)),t.xp6(2),t.Oqu(a.name),t.xp6(2),t.Oqu(a.weight)}}function E(n,i){if(1&n){const a=t.EpF();t.TgZ(0,"div",1)(1,"h3"),t._uU(2,"Selected Strategy: "),t.TgZ(3,"span",2),t._uU(4),t.qZA()(),t.TgZ(5,"div",3)(6,"mat-card",4)(7,"button",5),t.NdJ("click",function(){return t.CHM(a),t.oxw().onAddAnalysis()}),t._uU(8,"Add Analysis"),t.qZA()(),t.YNc(9,T,9,3,"mat-card",6),t.qZA()()}if(2&n){const a=t.oxw();t.xp6(4),t.Oqu(null==a.strategy?null:a.strategy.name),t.xp6(5),t.Q6J("ngForOf",a.analysis)}}let O=(()=>{class n{constructor(a,e,r,d){this.dialog=a,this.route=e,this.ss=r,this.as=d,this.analysis=[]}ngOnInit(){this.route.paramMap.subscribe(a=>{this.strategy=this.ss.getById(a.get("id")),this.as.analysis$.subscribe(e=>{this.analysis=e.filter(r=>r.strategyId===this.strategy.id)})})}onAddAnalysis(){this.dialog.open(A,{data:{strategyId:this.strategy.id}}).afterClosed().subscribe(e=>{e&&this.as.add(e)})}onDeleteAnalysis(a,e){e.stopPropagation(),this.dialog.open(C.$,{data:{title:"Delete Analysis",message:`Are you sure you want to delete analysis ${a.name}`}}).afterClosed().subscribe(d=>{d&&this.as.delete(a)})}createAnalysisEditorLink(a){return`analysis/${a}`}}return n.\u0275fac=function(a){return new(a||n)(t.Y36(l.uw),t.Y36(c.gz),t.Y36(x.D),t.Y36(Z.K))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-strategy-editor"]],decls:1,vars:1,consts:[["class","editor",4,"ngIf"],[1,"editor"],[1,"selected-strategy"],[1,"analyses"],[1,"add-analysis"],["mat-button","","color","primary",3,"click"],[3,"routerLink",4,"ngFor","ngForOf"],[3,"routerLink"],[1,"actions"],["mat-icon-button","","color","warn","aria-label","Delete",3,"click"]],template:function(a,e){1&a&&t.YNc(0,E,10,2,"div",0),2&a&&t.Q6J("ngIf",e.strategy)},directives:[m.O5,g.a8,p.lW,m.sg,c.rH,g.n5,g.$j,S.Hw],styles:[".editor[_ngcontent-%COMP%]{margin-top:30px}.analyses[_ngcontent-%COMP%]{margin-top:30px;display:flex;flex-wrap:wrap;position:relative}.analyses[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-right:20px;width:200px;height:120px;cursor:pointer}.analyses[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0}.add-analysis[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.selected-strategy[_ngcontent-%COMP%]{font-weight:700;color:#4287f5;font-size:1.3rem}"]}),n})(),M=(()=>{class n{}return n.\u0275fac=function(a){return new(a||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[m.ez,f.R,s.UX,c.Bz.forChild([{path:"",component:O}])]]}),n})()}}]);