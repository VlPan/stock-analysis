"use strict";(self.webpackChunkstock_analysis=self.webpackChunkstock_analysis||[]).push([[454],{3454:(E,d,i)=>{i.r(d),i.d(d,{AnalysisEditorModule:()=>U});var o=i(3075),h=i(3430),c=i(9808),m=(()=>((m||(m={})).NUMBER="number",m))(),l=i(8966),y=i(1042),t=i(5e3),p=i(7322),v=i(7531),u=i(7423);let Z=(()=>{class n{constructor(a,e,r){this.fb=a,this.dialogRef=e,this.data=r}ngOnInit(){this.paramsForm=this.fb.group({name:["",[o.kI.required]],weight:[1,[o.kI.required,o.kI.min(0)]],min:[1,[o.kI.required]],max:[1,[o.kI.required]]}),this.paramsForm.setValidators(A)}onSave(){const a={id:(0,y.Z)(),type:m.NUMBER,name:this.paramsForm.get("name").value,weight:this.paramsForm.get("weight").value,min:this.paramsForm.get("min").value,max:this.paramsForm.get("max").value,color:null};this.dialogRef.close(a)}}return n.\u0275fac=function(a){return new(a||n)(t.Y36(o.qu),t.Y36(l.so),t.Y36(l.WI))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-parameters-dialog"]],decls:23,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"parameters-form",3,"formGroup"],["appearance","fill"],["matInput","","formControlName","name"],["matInput","","formControlName","weight","type","number"],["matInput","","formControlName","min","type","number"],["matInput","","formControlName","max","type","number"],["mat-dialog-actions",""],["mat-button","","color","primary",3,"disabled","click"]],template:function(a,e){1&a&&(t.TgZ(0,"h1",0),t._uU(1,"Add Analysis"),t.qZA(),t.TgZ(2,"div",1)(3,"form",2)(4,"mat-form-field",3)(5,"mat-label"),t._uU(6,"Analysis Name"),t.qZA(),t._UZ(7,"input",4),t.qZA(),t.TgZ(8,"mat-form-field",3)(9,"mat-label"),t._uU(10,"Analysis Weight"),t.qZA(),t._UZ(11,"input",5),t.qZA(),t.TgZ(12,"mat-form-field",3)(13,"mat-label"),t._uU(14,"Min"),t.qZA(),t._UZ(15,"input",6),t.qZA(),t.TgZ(16,"mat-form-field",3)(17,"mat-label"),t._uU(18,"Max"),t.qZA(),t._UZ(19,"input",7),t.qZA()()(),t.TgZ(20,"div",8)(21,"button",9),t.NdJ("click",function(){return e.onSave()}),t._uU(22,"Save"),t.qZA()()),2&a&&(t.xp6(3),t.Q6J("formGroup",e.paramsForm),t.xp6(18),t.Q6J("disabled",e.paramsForm.invalid))},directives:[l.uh,l.xY,o._Y,o.JL,o.sg,p.KE,p.hX,v.Nt,o.Fj,o.JJ,o.u,o.wV,l.H8,u.lW],styles:[".parameters-form[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]}),n})();const A=n=>n.controls.min.value>n.controls.max.value?{invalidRange:"min can not be more than max"}:{};var x=i(4087),g=i(1083),f=i(9224),C=i(8099);function T(n,s){if(1&n){const a=t.EpF();t.TgZ(0,"div",3)(1,"h3"),t._uU(2,"Selected Analysis: "),t.TgZ(3,"span",4),t._uU(4),t.qZA(),t._uU(5),t.qZA(),t.TgZ(6,"button",5),t.NdJ("click",function(){return t.CHM(a),t.oxw().addParameter()}),t._uU(7,"Add Parameter"),t.qZA()()}if(2&n){const a=t.oxw();t.xp6(4),t.Oqu(a.analysis.name),t.xp6(1),t.hij(" (weight: ",a.analysis.weight,")")}}function P(n,s){if(1&n){const a=t.EpF();t.TgZ(0,"mat-card")(1,"mat-card-title"),t._uU(2),t.qZA(),t.TgZ(3,"div"),t._uU(4),t.qZA(),t.TgZ(5,"div"),t._uU(6),t.qZA(),t.TgZ(7,"div"),t._uU(8),t.qZA(),t.TgZ(9,"div",6)(10,"button",7),t.NdJ("click",function(r){const M=t.CHM(a).$implicit;return t.oxw().deleteParameter(M.id,r)}),t.TgZ(11,"mat-icon"),t._uU(12,"delete"),t.qZA()()()()}if(2&n){const a=s.$implicit;t.xp6(2),t.Oqu(a.name),t.xp6(2),t.hij("weight: ",a.weight,""),t.xp6(2),t.hij("weight: ",a.min,""),t.xp6(2),t.hij("weight: ",a.max,"")}}let b=(()=>{class n{constructor(a,e,r){this.as=a,this.route=e,this.dialog=r}ngOnInit(){this.route.paramMap.subscribe(a=>{this.as.analysis$.subscribe(e=>{this.analysis=e.find(r=>r.id===a.get("analysisId"))})})}addParameter(){this.dialog.open(Z).afterClosed().subscribe(e=>{e&&(this.analysis.parameters.push(e),this.as.update(this.analysis))})}deleteParameter(a,e){e.stopPropagation(),this.as.deleteParameter(this.analysis,a)}}return n.\u0275fac=function(a){return new(a||n)(t.Y36(x.K),t.Y36(g.gz),t.Y36(l.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-analysis-editor"]],decls:3,vars:2,consts:[["class","editor",4,"ngIf"],[1,"params"],[4,"ngFor","ngForOf"],[1,"editor"],[1,"selected-analysis"],["mat-button","","color","primary",3,"click"],[1,"actions"],["mat-icon-button","","color","warn","aria-label","Delete",3,"click"]],template:function(a,e){1&a&&(t.YNc(0,T,8,2,"div",0),t.TgZ(1,"div",1),t.YNc(2,P,13,4,"mat-card",2),t.qZA()),2&a&&(t.Q6J("ngIf",e.analysis),t.xp6(2),t.Q6J("ngForOf",e.analysis.parameters))},directives:[c.O5,u.lW,c.sg,f.a8,f.n5,C.Hw],styles:[".selected-analysis[_ngcontent-%COMP%]{font-weight:700;color:#edbb3e;font-size:1.3rem}.editor[_ngcontent-%COMP%]{margin-top:30px}.params[_ngcontent-%COMP%]{margin-top:30px;display:flex;flex-wrap:wrap;position:relative}.params[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-right:20px;width:200px;height:120px;cursor:pointer}.params[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0}.add-analysis[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.selected-strategy[_ngcontent-%COMP%]{font-weight:700;color:#4287f5;font-size:1.3rem}"]}),n})(),U=(()=>{class n{}return n.\u0275fac=function(a){return new(a||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[c.ez,h.R,o.UX,g.Bz.forChild([{path:"",component:b}])]]}),n})()}}]);